# HG changeset patch
# User Mike Kristoffersen <mkristoffersen@mozilla.com>
# Date 1273231204 -7200
# Node ID 3461e011db1c3cbdb1ee70681a66251bb8c1c6e1
# Parent  ca591da19a264294980f5ec49ced0924469e735e
Bug 564402  - slots #define in Qt, prevents Qt builds on trunk

diff -r ca591da19a26 -r 3461e011db1c layout/generic/nsObjectFrame.cpp
--- a/layout/generic/nsObjectFrame.cpp	Thu May 06 21:37:45 2010 -0700
+++ b/layout/generic/nsObjectFrame.cpp	Fri May 07 13:20:04 2010 +0200
@@ -51,6 +51,14 @@
 #ifdef MOZ_X11
 #include <QX11Info>
 #endif
+
+/*
+ * "slots" gets #defined by Qt, unfortunately its a common identifier,
+ * especially it is used as a local variable name in nsIFrame.h - since
+ * we don't use the Qt #defined "slots" we undefine it again here.
+ */
+#undef slots
+
 #endif
 
 #include "nscore.h"
diff -r ca591da19a26 -r 3461e011db1c widget/src/qt/nsNativeThemeQt.cpp
--- a/widget/src/qt/nsNativeThemeQt.cpp	Thu May 06 21:37:45 2010 -0700
+++ b/widget/src/qt/nsNativeThemeQt.cpp	Fri May 07 13:20:04 2010 +0200
@@ -49,6 +49,13 @@
 #include <QFlags>
 #include <QStyleOptionComboBox>
 
+/*
+ * "slots" gets #defined by Qt, unfortunately its a common identifier,
+ * especially it is used as a local variable name in nsIFrame.h - since
+ * we don't use the Qt #defined "slots" we undefine it again here.
+ */
+#undef slots
+
 #include "nsIFrame.h"
 
 #include "nsCoord.h"
