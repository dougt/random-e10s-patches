diff --git a/js/src/Makefile.in b/js/src/Makefile.in
--- a/js/src/Makefile.in
+++ b/js/src/Makefile.in
@@ -646,16 +646,19 @@ ifdef HAVE_DTRACE
 
 # We can't automatically generate dependencies on auto-generated headers;
 # we have to list them explicitly.
 $(addsuffix .$(OBJ_SUFFIX),jsdtracef jsinterp jsobj): $(CURDIR)/javascript-trace.h
 endif
 
 ifdef GNU_CC
 ifndef CROSS_COMPILE
+# QEMU segfaults in the standard maemo sdk 
+ifndef MOZ_PLATFORM_MAEMO
+
 # If we don't have run-mozilla.sh *and* we're linking against NSPR, we don't
 # know how to run the JS binary. Oh well
 
 imacro_asm.js: imacro_asm.js.in jsopcode.tbl
 	$(CC) -c -x c -E -P -I$(srcdir) $< > $@
 
 GARBAGE += imacros.c.tmp imacro_asm.js
 
@@ -695,8 +698,9 @@ update-nanojit:
 	(cd $(srcdir) && hg up)
 	(cd $(NANOJIT_CENTRAL_LOCAL) && hg log -r tip --template "{node}\n") >$(srcdir)/nanojit-import-rev
 	(cd $(srcdir) && hg commit --message="Update nanojit-import-rev stamp." nanojit-import-rev)
 
 .PHONY: update-imacros update-nanojit
 endif
 endif
 endif
+endif
diff --git a/js/src/config/autoconf.mk.in b/js/src/config/autoconf.mk.in
--- a/js/src/config/autoconf.mk.in
+++ b/js/src/config/autoconf.mk.in
@@ -324,16 +324,18 @@ WIN32_REDIST_DIR = @WIN32_REDIST_DIR@
 MOZ_MEMORY_LDFLAGS = @MOZ_MEMORY_LDFLAGS@
 
 # Codesighs tools option, enables win32 mapfiles.
 MOZ_MAPINFO	= @MOZ_MAPINFO@
 
 WINCE		= @WINCE@
 WINCE_WINDOWS_MOBILE = @WINCE_WINDOWS_MOBILE@
 
+MOZ_PLATFORM_MAEMO = @MOZ_PLATFORM_MAEMO@
+
 MACOS_SDK_DIR	= @MACOS_SDK_DIR@
 NEXT_ROOT	= @NEXT_ROOT@
 GCC_VERSION	= @GCC_VERSION@
 XCODEBUILD_VERSION= @XCODEBUILD_VERSION@
 HAS_XCODE_2_1	= @HAS_XCODE_2_1@
 UNIVERSAL_BINARY= @UNIVERSAL_BINARY@
 HAVE_DTRACE= @HAVE_DTRACE@
 
